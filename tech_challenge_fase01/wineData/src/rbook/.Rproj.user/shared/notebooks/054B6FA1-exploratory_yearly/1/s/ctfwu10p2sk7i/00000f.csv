"0","#| echo: false"
"0","#| message: false"
"0","#| warning: false"
"0","#| label: tbl-agg_by_country"
"0",""
"0","# dataframe com os índices de correção"
"0","cpi <-  tibble( cpi = correction, "
"0","        date = c(2022:2000)) |> "
"0","        mutate( date = lubridate::make_date(date,12,1))"
"0",""
"0",""
"0","# dataframe com os valores corrigidos pela inflação (valores de US$ de 2022)"
"0","ts_tbl_corr <- ts_tbl |> "
"0","  dplyr::full_join(cpi) |> "
"0","  dplyr::mutate(value_corr = value * cpi) |> "
"0","  dplyr::select(date, country, value_corr, volume) |> "
"0","  dplyr::mutate(value = value_corr)"
"0",""
"0","# dataframe com os valores corrigidos agregados por país"
"0","ts_agg_by_country <- ts_tbl_corr |> "
"0","   group_by(country) |> "
"0","   summarise(value = sum(value), "
"0","             volume = sum(volume)) |> "
"0","   arrange(desc(value))"
"0"," "
"0","tbl_render(ts_agg_by_country,"""")"
